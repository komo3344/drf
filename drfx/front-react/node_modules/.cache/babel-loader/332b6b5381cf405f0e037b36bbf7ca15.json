{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\ZB-PC087\\\\Desktop\\\\REST-Django-Framwork\\\\drfx\\\\front-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\ZB-PC087\\\\Desktop\\\\REST-Django-Framwork\\\\drfx\\\\front-react\\\\src\\\\pages\\\\Posts.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { URL } from 'pages';\nconst style = {\n  image: {\n    border: '1px solid #ccc',\n    background: '#fefefe'\n  }\n};\n\nclass Posts extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: [],\n      editing: false\n    };\n\n    this.handle_change = e => {\n      const name = e.target.name;\n      const value = e.target.value;\n      this.setState(prevstate => {\n        const newState = _objectSpread({}, prevstate);\n\n        newState[name] = value;\n        return newState;\n      });\n    };\n\n    this.handleDelete = url => {\n      fetch(url, {\n        method: 'DELETE',\n        headers: {\n          Authorization: \"JWT \".concat(localStorage.getItem('token'))\n        }\n      }).then(res => postlist());\n    };\n\n    this.handleUpdate = id => {\n      this.setState({\n        editing: !this.state.editing\n      });\n      fetch(\"\".concat(URL.posts).concat(id, \"/\")).then(res => res.json()).then(json => {\n        this.setState({\n          id: id,\n          title: json.title,\n          content: json.content,\n          image: json.image\n        });\n      });\n    };\n\n    this.handleModify = id => {\n      this.setState({\n        editing: !this.state.editing\n      });\n      fetch(\"\".concat(URL.posts).concat(id, \"/\"), {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: \"JWT \".concat(localStorage.getItem('token'))\n        },\n        body: JSON.stringify({\n          \"title\": this.state.title,\n          \"content\": this.state.content //\"image\" : this.state.image\n\n        })\n      });\n      console.log(\"\".concat(URL.posts).concat(id, \"/\"));\n      window.location.reload();\n    };\n  }\n\n  async postlist() {\n    try {\n      const res = await fetch(URL.posts);\n      const posts = await res.json();\n      this.setState({\n        posts\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async componentDidMount() {\n    try {\n      const res = await fetch(URL.posts);\n      const posts = await res.json();\n      this.setState({\n        posts\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, this.state.editing ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"\\uC218\\uC815\\uC911\"), React.createElement(\"form\", {\n      onSubmit: () => {\n        this.handleModify(this.state.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"title\"), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"title\",\n      value: this.state.title,\n      onChange: this.handle_change,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"content\"), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"content\",\n      value: this.state.content,\n      onChange: this.handle_change,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"\\uC6D0\\uB798\\uC791\\uC5C5\"), this.state.posts.map(item => React.createElement(\"div\", {\n      key: item.url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"\\uC81C\\uBAA9 : \", item.title), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"\\uB0B4\\uC6A9 : \", item.content), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"\\uC791\\uC131\\uC790 : \", item.owner), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"\\uC0DD\\uC131\\uC77C : \", item.created_at), React.createElement(\"img\", {\n      src: item.image,\n      alt: \"No img\",\n      height: 240,\n      width: 240,\n      style: style.image,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: () => {\n        this.handleDelete(item.url);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"\\uC0AD\\uC81C\"), React.createElement(\"button\", {\n      onClick: () => {\n        this.handleUpdate(item.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"\\uC218\\uC815\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }))), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Home\")))));\n  }\n\n}\n\nexport default Posts;","map":{"version":3,"sources":["C:\\Users\\ZB-PC087\\Desktop\\REST-Django-Framwork\\drfx\\front-react\\src\\pages\\Posts.js"],"names":["React","Component","Link","URL","style","image","border","background","Posts","state","posts","editing","handle_change","e","name","target","value","setState","prevstate","newState","handleDelete","url","fetch","method","headers","Authorization","localStorage","getItem","then","res","postlist","handleUpdate","id","json","title","content","handleModify","body","JSON","stringify","console","log","window","location","reload","componentDidMount","render","map","item","owner","created_at"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { URL } from 'pages';\r\nconst style = {\r\n    image: {\r\n        border: '1px solid #ccc',\r\n        background: '#fefefe',\r\n    },\r\n};\r\nclass Posts extends Component {\r\n    state = {\r\n        posts: [],\r\n        editing : false\r\n    };\r\n\r\n    handle_change = e => {\r\n        const name = e.target.name;\r\n        const value = e.target.value;\r\n        this.setState(prevstate => {\r\n          const newState = { ...prevstate };\r\n          newState[name] = value;\r\n          return newState;\r\n        });\r\n      };\r\n\r\n    handleDelete = url => {\r\n        fetch(url, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                Authorization: `JWT ${localStorage.getItem('token')}`\r\n            }\r\n        }).then(res => postlist())\r\n        \r\n    }\r\n    async postlist() {\r\n        try {\r\n            const res = await fetch(URL.posts);\r\n            const posts = await res.json();\r\n            this.setState({\r\n                posts\r\n            });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    handleUpdate = (id) => {\r\n        this.setState({\r\n            editing : !this.state.editing\r\n        })\r\n        fetch(`${URL.posts}${id}/`)\r\n        .then(res => res.json())\r\n        .then(json => {\r\n            this.setState({\r\n                id : id,\r\n                title : json.title,\r\n                content : json.content,\r\n                image : json.image,\r\n                \r\n            })\r\n        })\r\n        \r\n    }\r\n\r\n    handleModify = (id) => {\r\n        this.setState({\r\n            editing : !this.state.editing\r\n        })\r\n        fetch(`${URL.posts}${id}/`,{\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type' : 'application/json',\r\n                Authorization: `JWT ${localStorage.getItem('token')}`\r\n            },\r\n            body: JSON.stringify({\r\n                \"title\" : this.state.title,\r\n                \"content\" : this.state.content,\r\n                //\"image\" : this.state.image\r\n            })\r\n        })\r\n        console.log(`${URL.posts}${id}/`)\r\n        window.location.reload();\r\n        \r\n    }\r\n\r\n    async componentDidMount() {\r\n        try {\r\n            const res = await fetch(URL.posts);\r\n            const posts = await res.json();\r\n            this.setState({\r\n                posts\r\n            });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div>\r\n                {this.state.editing\r\n                    ? (\r\n                        <div>\r\n                            <h5>수정중</h5>\r\n                            <form onSubmit={() => {this.handleModify(this.state.id)}}>\r\n                                <label htmlFor=\"title\">title</label>\r\n                                <input\r\n                                type=\"text\"\r\n                                name=\"title\"\r\n                                value={this.state.title}\r\n                                onChange={this.handle_change}\r\n                                />\r\n                                <label htmlFor=\"content\">content</label>\r\n                                <input\r\n                                type=\"text\"\r\n                                name=\"content\"\r\n                                value={this.state.content}\r\n                                onChange={this.handle_change}\r\n                                />\r\n                                <input type=\"submit\" />\r\n                            </form>\r\n                        </div>\r\n                        )\r\n                    : (\r\n                        <div>\r\n                            <h5>원래작업</h5>        \r\n                            {this.state.posts.map(item =>\r\n                                (\r\n                                    <div key={item.url}>\r\n                                        <h4>제목 : {item.title}</h4>\r\n                                        <p>내용 : {item.content}</p>\r\n                                        <p>작성자 : {item.owner}</p>\r\n                                        <p>생성일 : {item.created_at}</p>\r\n                                        <img\r\n                                         src={item.image}\r\n                                         alt='No img'\r\n                                         height={240}\r\n                                         width={240}\r\n                                         style={style.image\r\n                                        }\r\n                                        /><br />\r\n                           \r\n                                        <button onClick={() => {this.handleDelete(item.url)}}>삭제</button>\r\n                                        <button onClick={() => {this.handleUpdate(item.id)}}>수정</button>\r\n                                        <br /><br />\r\n                                    </div>\r\n                                )\r\n                            )\r\n                }           \r\n                <p><Link to='/'>Home</Link></p>\r\n                        </div>\r\n                        )\r\n                }\r\n                </div>\r\n                \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Posts;"]},"metadata":{},"sourceType":"module"}